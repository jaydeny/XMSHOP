<!DOCTYPE html>
<html>
<head>
    <link href="~/Areas/Phone/Content/ShoppingCart/cart.css" rel="stylesheet" type="text/css">
</head>
<body style="background: #F5F5F4;">
    <div id="cart">
        <div class="header">
            <a href="" class="left"></a>
            购物车
            <span class="shop-cart-htext1">编辑</span>
        </div>
        <div class="shop-cart-bigbox">
            <div class="cart-title">先锋侠需要您的精确坐标</div>
            <div class="cart-title">收货时间 <i>今天30分钟可送达(可预订)</i></div>
            <div class="shop-cart-listbox1">
              
                <div class="index-goods" v-for="(obj,index) in cartTable" :key="index"> 
                    <span class="shop-cart-check2"><input type="checkbox" name="sub2" class="shopcart-input1 btn2" :id="obj.item_ID"></span>
                    <span class="index-goods-img"><img src="https://img11.360buyimg.com/n7/jfs/t30040/100/1290632710/208879/1f7e2225/5cdd0d92Nb78895a6.jpg"></span>
                    <div class="index-goods-textbox">
                        <span class="index-goods-text1">{{obj.GoodsName}}</span>
                        <div class="index-goods-text2">￥<i class="priceJs">{{tranfoMoney(obj.GoodsPrice)}}</i></div>
                        <div class="shop-cart-box3">
                            <span class="shop-cart-subtract"></span>
                            <input type="tel" size="6" :value="obj.Agoods_Count" id="tb_count" class="shop-cart-numer">
                            <span class="shop-cart-add"></span>
                        </div>
                    </div>
                </div>
              
                <div class="shopPrice">本店总计：￥<span class="ShopTotal">0.00</span></div>
            </div>



        </div>
        <div class="shop-cart-total">
            <label class="checkall">
                <span class="shop-cart-check1"><input type="checkbox" class="" id="ckAll"></span>
                全选
            </label>
            <span class="scart-total-text2">合计：￥</span>
            <span id="AllTotal" class="scart-total-text3">0.00</span>
            <a href="./indent-details.html" class="scart-total-text4">去结算<i id="selectedTotal"></i></a>
            <span class="delete hide"></span>
        </div>

        <input type="hidden" id="ids" value="">
    </div>
    <script>
        new Vue({
            el: "#cart",
            data: {
                //获取购物车项的数据
                getCartDataURL: "/Phone/PhoneShoppCart/GetCartByVIPID_MB",
                cartTable:[]
            },
            created: function () {
                this.init();
            },
            methods: {
                //初始化数据
                init() {
                    this.getCartData();
                },
                // 获取后台购物车项的方法
                getCartData() {
                    $.ajax({
                        url: this.getCartDataURL,
                        dataType: 'json'
                    }).then((data) => {
                        console.log(data)
                        this.cartTable = data.data;
                    });
                },
                //进行数值和金钱的转化
                tranfoMoney(num) {
                    return this.tranfoMoneyber(num, 2);
                },
                tranfoMoneyber(number, n) {
                    if (n != 0) {
                        n = (n > 0 && n <= 20) ? n : 2;
                    }
                    number = parseFloat((number + "").replace(/[^\d\.-]/g, "")).toFixed(n) + "";
                    var sub_val = number.split(".")[0].split("").reverse();
                    var sub_xs = number.split(".")[1];

                    var show_html = "";
                    for (i = 0; i < sub_val.length; i++) {
                        show_html += sub_val[i] + ((i + 1) % 3 == 0 && (i + 1) != sub_val.length ? "," : "");
                    }

                    if (n == 0) {
                        return show_html.split("").reverse().join("");
                    } else {
                        return show_html.split("").reverse().join("") + "." + sub_xs;
                    }
                }
            }
        })
    </script>

    <script src="~/Areas/Phone/Script/ShoppingCart/cart.js" type="text/javascript"></script>

</body>
</html>
